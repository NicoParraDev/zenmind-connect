name: Pre-Deployment Checks

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  pre-deploy:
    name: Pre-Deployment Validation
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Validate render.yaml
      run: |
        if [ ! -f "render.yaml" ]; then
          echo "âŒ render.yaml not found!"
          exit 1
        fi
        echo "âœ… render.yaml found"

    - name: Validate requirements.txt
      run: |
        if [ ! -f "requirements.txt" ]; then
          echo "âŒ requirements.txt not found!"
          exit 1
        fi
        echo "âœ… requirements.txt found"

    - name: Check Django settings
      run: |
        python -c "import django; print(f'Django version: {django.get_version()}')" || echo "âš ï¸ Django check skipped (dependencies not installed)"

    - name: Deployment Info
      run: |
        echo "ğŸ“‹ Render Auto-Deploy Configuration:"
        echo "  - Render will automatically deploy from GitHub when:"
        echo "    â€¢ Push to main/master branch"
        echo "    â€¢ render.yaml is present in root"
        echo "    â€¢ Repository is connected in Render dashboard"
        echo ""
        echo "âœ… Pre-deployment checks passed!"
        echo "ğŸš€ Render will handle deployment automatically"

